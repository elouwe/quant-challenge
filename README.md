# Orderbook Delta Momentum Strategy

**–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ —Ç–æ—Ä–≥–æ–≤–ª–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–µ–ª—å—Ç—ã —Å—Ç–∞–∫–∞–Ω–∞ –æ—Ä–¥–µ—Ä–æ–≤ (Level 2) —Å –±–∏—Ä–∂–∏ Bybit.**
–°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–æ–º–µ–Ω—Ç—ã –≤—Ö–æ–¥–∞ –∏ –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–±—ä—ë–º–∞ –±–∏–¥–æ–≤ –∏ –∞—Å–∫–æ–≤. –ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π pipeline: —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ ‚Üí –±—ç–∫—Ç–µ—Å—Ç ‚Üí –æ—Ç—á—ë—Ç.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install \
  aiohttp>=3.8.0 \
  numpy>=1.24.0 \
  websockets>=11.0.3 \
  pandas>=2.0.0 \
  pyarrow>=12.0.0 \
  matplotlib>=3.7.0 \
  python-dateutil>=2.8.2
```

### ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config.py`)

```python
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–æ—Ä–≥–æ–≤–ª–∏
SYMBOL = "ETHUSDT"       # –¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞
TESTNET = True           # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Bybit testnet
DELTA_THRESHOLD = 0.1    # –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–≥–Ω–∞–ª–∞ 

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—ç–∫—Ç–µ—Å—Ç–∞
INITIAL_BALANCE = 10000  # –°—Ç–∞—Ä—Ç–æ–≤—ã–π –∫–∞–ø–∏—Ç–∞–ª (USD)
TRADE_QUANTITY = 0.1     # –û–±—ä–µ–º —Å–¥–µ–ª–∫–∏ (ETH)
MAX_ITERATIONS = 100     # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–æ–≤ —Å–∏–º—É–ª—è—Ü–∏–∏
```

---

## –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

```bash
python main.py
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Bybit Testnet
2. –û–ø—Ä–æ—Å —Å—Ç–∞–∫–∞–Ω–∞ –æ—Ä–¥–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ REST API
3. –†–∞—Å—á—ë—Ç –¥–µ–ª—å—Ç—ã –º–µ–∂–¥—É —Ç–∏–∫-—Å–Ω–∞–ø—à–æ—Ç–∞–º–∏
4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ (BUY / SELL / HOLD)
5. –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫
6. –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏


## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

* `bybit_client.py`, `bybit_adapter.py` ‚Äî REST-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Bybit
* –°–±–æ—Ä Level 2 –¥–∞–Ω–Ω—ã—Ö: bids / asks
* –†–∞—Å—á—ë—Ç –¥–µ–ª—å—Ç—ã –æ—Ä–¥–µ—Ä–±—É–∫–∞

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤

* `DeltaStrategy` ‚Äî –ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞: –µ—Å–ª–∏ –¥–µ–ª—å—Ç–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ø–æ—Ä–æ–≥ ‚Äî BUY / SELL
* –ü–æ—Ä–æ–≥ –∑–∞–¥–∞—ë—Ç—Å—è –≤ `config.py`

### –ë—ç–∫—Ç–µ—Å—Ç

* `Backtester` ‚Äî —Å–∏–º—É–ª—è—Ç–æ—Ä —Ç–æ—Ä–≥–æ–≤–ª–∏ –ø–æ —Å–∏–≥–Ω–∞–ª–∞–º
* –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è –∏ –∫–æ–º–∏—Å—Å–∏–π

### –û—Ç—á—ë—Ç—ã

* `ReportGenerator` ‚Äî —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –∏ –º–µ—Ç—Ä–∏–∫–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –§–∞–π–ª/–ü–∞–ø–∫–∞            | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                          |
| --------------------- | ----------------------------------- |
| `main.py`             | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, —Ü–∏–∫–ª —Å–∏–º—É–ª—è—Ü–∏–∏         |
| `data_service.py`     | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞–∫–∞–Ω–∞       |
| `strategy_service.py` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–µ–ª—å—Ç—ã |
| `backtest_service.py` | –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫       |
| `handlers.py`         | –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ (CQRS)           |
| `contracts.py`        | –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–∞ CQRS    |
| `bybit_*.py`          | REST –∞–¥–∞–ø—Ç–µ—Ä—ã –ø–æ–¥ API Bybit         |
| `report.py`           | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫          |
| `config.py`           | –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∞ –∏ —Ç–æ—Ä–≥–æ–≤–ª–∏      |


## üß™ –ü—Ä–∏–º–µ—Ä –æ—Ç—á—ë—Ç–∞

```
==================== RESEARCH REPORT ====================
Strategy: Orderbook Delta Momentum
Symbol: ETHUSDT
Timeframe: N/A
Total Iterations: 100
---------------------------------------------------------
Performance Metrics:
Initial Balance: $10000.00
Final Balance:   $10250.00
Position:        0.350000 ETH
Position Value:  $1050.00
Total Value:     $11300.00
PNL:             $1300.00
Total Trades:    15
---------------------------------------------------------
Conclusion: This research demonstrates a basic strategy
based on orderbook delta momentum. The strategy showed
a profit of $1300.00 over 100 iterations.
=========================================================
```

## üìâ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–¥–µ–ª–æ–∫

–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–∞–∂–¥–∞—è —Å–¥–µ–ª–∫–∞ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ:

![Trade Prices](./python/trade_prices.png)

* üü© –ó–µ–ª—ë–Ω—ã–µ –±–∞—Ä—ã ‚Äî —É—Å–ø–µ—à–Ω—ã–µ —Å–¥–µ–ª–∫–∏ (–ø—Ä–∏–±—ã–ª—å–Ω—ã–µ)
* üü• –ö—Ä–∞—Å–Ω—ã–µ –±–∞—Ä—ã ‚Äî —É–±—ã—Ç–æ—á–Ω—ã–µ
* –û—Å—å X ‚Äî –Ω–æ–º–µ—Ä —Å–¥–µ–ª–∫–∏
* –û—Å—å Y ‚Äî —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –æ—Ü–µ–Ω–∏—Ç—å:

* –ß–∞—Å—Ç–æ—Ç—É –≤—Ö–æ–¥–æ–≤ –∏ –≤—ã—Ö–æ–¥–æ–≤
* –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –∏ —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
* –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### üìÑ trades_report.csv ‚Äî —ç—Ç–æ —Å—ã—Ä–æ–π –ª–æ–≥ –≤—Å–µ—Ö —Å–æ–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

–ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî –æ–¥–Ω–∞ —Å–¥–µ–ª–∫–∞. –í –æ—Ç—á—ë—Ç–µ –æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è —Ç–∞–∫–∏–µ —Å—Ç–æ–ª–±—Ü—ã:

| –ü–æ–ª–µ        | –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç                             |
| ----------- | ---------------------------------------- |
| timestamp | –í—Ä–µ–º—è —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∏–∫) |
| signal    | –°–∏–≥–Ω–∞–ª, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –≤–æ—à–ª–∏: BUY/SELL      |
| price     | –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞ –≤ —Å–¥–µ–ª–∫—É                      |
| position  | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: long / short (–∏–ª–∏ 1 / -1)   |
| pnl       | –ü—Ä–∏–±—ã–ª—å –∏–ª–∏ —É–±—ã—Ç–æ–∫ –ø–æ —Å–¥–µ–ª–∫–µ             |
| delta     | –ó–Ω–∞—á–µ–Ω–∏–µ –¥–µ–ª—å—Ç—ã, –≤—ã–∑–≤–∞–≤—à–µ–µ —Å–¥–µ–ª–∫—É        |

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª—è –≤—Ä–æ–¥–µ trade_id, position_size, exit_price, duration, –Ω–æ —ç—Ç–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

üìå –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

* –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫, –∫–∞–∫ —Ç–æ—Ç, —á—Ç–æ —Ç—ã –ø—Ä–∏–ª–æ–∂–∏–ª–∞ (trade_prices.png)
* –ù–∞ –µ–≥–æ –æ—Å–Ω–æ–≤–µ –º–æ–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å winrate, —Å—Ä–µ–¥–Ω—é—é –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫, drawdown, –∏ –ø—Ä–æ—á–∏–µ –º–µ—Ç—Ä–∏–∫–∏
* –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –≤ pandas –∏–ª–∏ Excel

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

* Python 3.8+
* `aiohttp`, `websockets` ‚Äî —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –ø–æ—Ç–æ–∫–∏
* `numpy`, `pandas`, `pyarrow` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
* `matplotlib`, `python-dateutil` ‚Äî –æ—Ç—á—ë—Ç—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∏
